<!-- MESSAGES -->
<div class="container bg-white py-5 rounded-3">

  <div class="row">

    <div style="max-height: 700px; overflow-y: auto;" class="col-md-4">
         
      <div class="card-container justify-content-around" id="card-container1">
              


              <div class="card" id="card1" draggable="true">
                  
                  <div class="card-content">
                      
                      <p class="fst-italic">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                        incididunt ut labore et dolore magna aliqua</p>
                      <a class="btn btn-primary hide-btn" data-card-id="card1"
                          href="">ARCHIVE</a>
                  </div>
                  <div style="background-color: #123f6e; align-content: center;justify-content: center;">
                    <br>
                <h4 style="text-align: center;color: white;"><i class="company-icon fas fa-building"></i> Card 1
                </h4>
                </div>
              </div>
              <div class="card drop2" id="card2" draggable="true">
                  
                  <div class="card-content drop3">
                      
                    <p class="fst-italic">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                      incididunt ut labore et dolore magna aliqua</p>
                      <a class="btn btn-outline-dark fst-italic fw-medium hide-btn" data-card-id="card2"
                          href="">ARCHIVE</a>
                  </div>
                  <div style="background-color: #123f6e; align-content: center;justify-content: center;">
                    <br>
                <h4 style="text-align: center;color: white;"><i class="company-icon fas fa-building"></i> Card 1
                </h4>
                </div>
              </div>
              <div class="card drop2" id="card3" draggable="true">
                  <div class="card-content drop3">
                    <p class="fst-italic">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                      incididunt ut labore et dolore magna aliqua</p>
                      <a class="btn btn-outline-dark fst-italic fw-medium hide-btn" data-card-id="card3"
                          href="">ARCHIVE</a>
                  </div>
                  <div style="background-color: #123f6e; align-content: center;justify-content: center;">
                    <br>
                <h4 style="text-align: center;color: white;"><i class="company-icon fas fa-building"></i> Card 1
                </h4>
                </div>
              </div>
          </div>
      </div>

  </div>

</div>

<br>
<center>
  <a class="btn btn-outline-success fst-italic fw-medium" href="{% url 'hidden' %}">VIEW ARCHIVED</a>
</center>
<br>




<div id="archive-popup"
  style="display: none; position: fixed; top: 50%; left: 85%; transform: translate(-50%, -50%); background-color: rgb(0, 0, 0); padding: 20px; border: 1px solid rgb(0, 0, 0); border-radius: 5px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);">
  <p class="text-warning px-5">Swipe to Archive</p>
  <center>
      <img width="50px" class="img-fluid" src="{% static 'images/archived.png' %}" alt="">
  </center>

</div>


<script>
  document.addEventListener('DOMContentLoaded', function () {
      // Function to show popup when archiving
      function showArchivePopup() {
          var popup = document.getElementById('archive-popup');
          popup.style.display = 'block';
          setTimeout(function () {
              popup.style.display = 'none';
          }, 2000); // Hide popup after 2 seconds
      }

      // Function to hide a card
      function hideCard(cardId) {
          var card = document.getElementById(cardId);
          card.style.display = 'none';
          sessionStorage.setItem(cardId, 'hidden');
      }

      // Function to unhide a card
      function unhideCard(cardId) {
          var card = document.getElementById(cardId);
          card.style.display = 'block';
          sessionStorage.removeItem(cardId);
      }

      // Hide cards that were previously hidden
      for (var i = 0; i < sessionStorage.length; i++) {
          var cardId = sessionStorage.key(i);
          hideCard(cardId);
      }

      // Add event listeners to hide buttons
      var hideButtons = document.querySelectorAll('.hide-btn');
      hideButtons.forEach(function (button) {
          button.addEventListener('click', function () {
              var cardId = button.getAttribute('data-card-id');
              hideCard(cardId);
          });
      });

      // Add event listeners to unhide buttons
      var unhideButtons = document.querySelectorAll('.unhide-btn');
      unhideButtons.forEach(function (button) {
          button.addEventListener('click', function () {
              var cardId = button.getAttribute('data-card-id');
              unhideCard(cardId);
          });
      });

      // Add event listener to cards for drag
      var cards = document.querySelectorAll('.card');
      cards.forEach(function (card) {
          var startX = 0;

          card.addEventListener('dragstart', function (e) {
              startX = e.clientX;
              showArchivePopup();
          });

          card.addEventListener('dragend', function (e) {
              var deltaX = Math.abs(e.clientX - startX);
              if (deltaX >= 20) {
                  var cardId = card.id;
                  hideCard(cardId);
                  window.location.href = "{% url 'hidden' %}";
              }
          });
      });

  });
</script>